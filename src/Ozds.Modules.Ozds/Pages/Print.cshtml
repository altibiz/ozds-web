@page "{contentType}/{contentItemId?}"

@using Microsoft.AspNetCore.Authorization
@using Microsoft.Extensions.Configuration
@using Ozds.Modules.Ozds
@using Ozds.Util

@attribute [Authorize(Roles = "Administrator")]

@inject IConfiguration Configuration

@{
  ViewLayout = "Layout.Print";

  var contentItemId = Request.RouteValues.GetNonNullable("contentItemId");
  var contentItem = await Orchard.GetContentItemByIdAsync(contentItemId);
  var headerText = T["Print"].Value;

  var downloadLink = string
    .Format(
      Configuration
        .GetValue<string?>("PrintPdfUrl")
        .ThrowWhenNull(),
      contentItemId,
      string.Format(
        "https://{0}/Ozds.Modules.Ozds/Print/{1}/",
        Request.Host,
        contentItemId));
}

@if (contentItem is null)
{

}

@await Orchard.DisplayByIdAsync(contentItemId, "Print")

<a href='@downloadLink' target="_blank">
  @T["Download"]
</a>