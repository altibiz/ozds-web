var _templateObject,_templateObject2,_templateObject3;function ownKeys(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){_defineProperty(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function _defineProperty(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function _taggedTemplateLiteral(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function asyncGeneratorStep(e,r,n,t,a,o,s){try{var i=e[o](s),u=i.value}catch(e){return void n(e)}i.done?r(u):Promise.resolve(u).then(t,a)}function _asyncToGenerator(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function s(e){asyncGeneratorStep(o,t,a,s,i,"next",e)}function i(e){asyncGeneratorStep(o,t,a,s,i,"throw",e)}s(void 0)}))}}var getDashboardMeasurements=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(r,n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,query({query:gql(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n      query ($deviceId: String!, $period: PeriodInput) {\n        dashboardMeasurements(deviceId: $deviceId, period: $period) {\n          timestamp\n          deviceId\n          data {\n            energy\n            highCostEnergy\n            lowCostEnergy\n            power\n            powerL1\n            powerL2\n            powerL3\n            currentL1\n            currentL2\n            currentL3\n            voltageL1\n            voltageL2\n            voltageL3\n          }\n        }\n      }\n    "]))),variables:{deviceId:r,period:serializePeriod(n)}});case 2:if(t=e.sent){e.next=5;break}throw new Error("Failed fetching");case 5:return e.abrupt("return",normalizeDashboardMeasurements(t.data.dashboardMeasurements));case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),getDashboardMeasurementsByOwner=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(r,n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,query({query:gql(_templateObject2||(_templateObject2=_taggedTemplateLiteral(["\n      query ($ownerId: String!, $period: PeriodInput) {\n        dashboardMeasurementsByOwner(ownerId: $ownerId, period: $period) {\n          deviceIds\n          measurements {\n            timestamp\n            data {\n              deviceId\n              data {\n                energy\n                highCostEnergy\n                lowCostEnergy\n                power\n                powerL1\n                powerL2\n                powerL3\n                currentL1\n                currentL2\n                currentL3\n                voltageL1\n                voltageL2\n                voltageL3\n              }\n            }\n          }\n        }\n      }\n    "]))),variables:{ownerId:r,period:serializePeriod(n)}});case 2:if(t=e.sent){e.next=5;break}throw new Error("Failed fetching");case 5:return e.abrupt("return",normalizeMultiDashboardMeasurements(t.data.dashboardMeasurementsByOwner));case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),getDashboardMeasurementsByOwnerUser=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(r,n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,query({query:gql(_templateObject3||(_templateObject3=_taggedTemplateLiteral(["\n      query ($ownerUserId: String!, $period: PeriodInput) {\n        dashboardMeasurementsByOnwerUser(\n          ownerUserId: $ownerUserId\n          period: $period\n        ) {\n          deviceIds\n          measurements {\n            timestamp\n            data {\n              deviceId\n              data {\n                energy\n                highCostEnergy\n                lowCostEnergy\n                power\n                powerL1\n                powerL2\n                powerL3\n                currentL1\n                currentL2\n                currentL3\n                voltageL1\n                voltageL2\n                voltageL3\n              }\n            }\n          }\n        }\n      }\n    "]))),variables:{ownerUserId:r,period:serializePeriod(n)}});case 2:if(t=e.sent){e.next=5;break}throw new Error("Failed fetching");case 5:return e.abrupt("return",normalizeMultiDashboardMeasurements(t.data.dashboardMeasurementsByOnwerUser));case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),normalizeMultiDashboardMeasurements=function(e){return _objectSpread(_objectSpread({},e),{},{measurements:e.measurements.map((function(e){return _objectSpread(_objectSpread({},e),{},{timestamp:new luxon.DateTime(e.timestamp)})})).sort((function(e,r){return e.timestamp-r.timestamp}))})},normalizeDashboardMeasurements=function(e){return e.map((function(e){return _objectSpread(_objectSpread({},e),{},{timestamp:new luxon.DateTime(e.timestamp)})})).sort((function(e,r){return e.timestamp-r.timestamp}))},deserializePeriod=function(e){return{from:new luxon.DateTime(e.from),to:new luxon.DateTime(e.to)}},serializePeriod=function(e){return{from:e.from.toISO(),to:e.to.toISO()}},query=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(r){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://localhost:5001/graphql",{method:"POST",body:JSON.stringify(r),headers:{"content-type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return t=e.sent,e.abrupt("return",t);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}();window.GraphQL={getDashboardMeasurements:getDashboardMeasurements,getDashboardMeasurementsByOwner:getDashboardMeasurementsByOwner,getDashboardMeasurementsByOwnerUser:getDashboardMeasurementsByOwnerUser,normalizeDashboardMeasurements:normalizeDashboardMeasurements,normalizeMultiDashboardMeasurements:normalizeMultiDashboardMeasurements,deserializePeriod:deserializePeriod,serializePeriod:serializePeriod};var gql=function(e){return e[0]};
